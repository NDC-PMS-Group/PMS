import{c as l,a5 as c,p as a}from"./index-BGKEJEuu.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=l("PencilIcon",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),p=c("accessSettings",{state:()=>({permissions:[],roles:[],loading:!1,selectedRole:null}),getters:{permissionsByResource:s=>{const e={};return s.permissions.forEach(t=>{e[t.resource]||(e[t.resource]=[]),e[t.resource].push(t)}),e},getRoleById:s=>e=>s.roles.find(t=>t.id===e),getPermissionById:s=>e=>s.permissions.find(t=>t.id===e),customRoles:s=>s.roles.filter(e=>!e.is_system_role),systemRoles:s=>s.roles.filter(e=>e.is_system_role)},actions:{async fetchPermissions(){this.loading=!0;try{const s=await a.get("/api/access-settings/permissions");this.permissions=Array.isArray(s.data)?s.data:s.data.data||[]}catch(s){throw console.error("Failed to fetch permissions:",s),this.permissions=[],s}finally{this.loading=!1}},async createPermission(s){this.loading=!0;try{const e=await a.post("/api/access-settings/permissions",s),t=e.data.data||e.data;return this.permissions.push(t),t}catch(e){throw console.error("Failed to create permission:",e),e}finally{this.loading=!1}},async updatePermission(s,e){this.loading=!0;try{const t=await a.put(`/api/access-settings/permissions/${s}`,e),i=t.data.data||t.data,r=this.permissions.findIndex(o=>o.id===s);return r!==-1&&(this.permissions[r]=i),i}catch(t){throw console.error("Failed to update permission:",t),t}finally{this.loading=!1}},async deletePermission(s){this.loading=!0;try{await a.delete(`/api/access-settings/permissions/${s}`),this.permissions=this.permissions.filter(e=>e.id!==s)}catch(e){throw console.error("Failed to delete permission:",e),e}finally{this.loading=!1}},async fetchRoles(){this.loading=!0;try{const s=await a.get("/api/access-settings/roles");this.roles=Array.isArray(s.data)?s.data:s.data.data||[]}catch(s){throw console.error("Failed to fetch roles:",s),this.roles=[],s}finally{this.loading=!1}},async createRole(s){this.loading=!0;try{const e=await a.post("/api/access-settings/roles",s),t=e.data.data||e.data;return this.roles.push(t),t}catch(e){throw console.error("Failed to create role:",e),e}finally{this.loading=!1}},async updateRole(s,e){this.loading=!0;try{const t=await a.put(`/api/access-settings/roles/${s}`,e),i=t.data.data||t.data,r=this.roles.findIndex(o=>o.id===s);return r!==-1&&(this.roles[r]=i),i}catch(t){throw console.error("Failed to update role:",t),t}finally{this.loading=!1}},async deleteRole(s){this.loading=!0;try{await a.delete(`/api/access-settings/roles/${s}`),this.roles=this.roles.filter(e=>e.id!==s)}catch(e){throw console.error("Failed to delete role:",e),e}finally{this.loading=!1}},async assignPermissions(s,e){this.loading=!0;try{const t={permission_ids:e},i=await a.post(`/api/access-settings/roles/${s}/permissions/assign`,t),r=i.data.data||i.data,o=this.roles.findIndex(n=>n.id===s);return o!==-1&&(this.roles[o]=r),r}catch(t){throw console.error("Failed to assign permissions:",t),t}finally{this.loading=!1}},async removePermissions(s,e){this.loading=!0;try{const t={permission_ids:e},i=await a.post(`/api/access-settings/roles/${s}/permissions/remove`,t),r=i.data.data||i.data,o=this.roles.findIndex(n=>n.id===s);return o!==-1&&(this.roles[o]=r),r}catch(t){throw console.error("Failed to remove permissions:",t),t}finally{this.loading=!1}},async syncPermissions(s,e){this.loading=!0;try{const t={permission_ids:e},i=await a.post(`/api/access-settings/roles/${s}/permissions/sync`,t),r=i.data.data||i.data,o=this.roles.findIndex(n=>n.id===s);return o!==-1&&(this.roles[o]=r),r}catch(t){throw console.error("Failed to sync permissions:",t),t}finally{this.loading=!1}},setSelectedRole(s){this.selectedRole=s},clearState(){this.permissions=[],this.roles=[],this.selectedRole=null,this.loading=!1}}});export{h as P,p as u};
