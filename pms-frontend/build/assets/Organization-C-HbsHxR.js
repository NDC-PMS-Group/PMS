import{c as O,d as N,o as s,f as l,v as f,b as e,i as k,t as d,ac as K,h as $,e as y,S as H,x as b,y as T,a6 as R,F as D,m as L,g as x,P as W,a as P,W as Y,C as Z,a9 as G,n as A,j as S,V as U,I as ee,Y as te,T as ae,Q as X,a8 as J,l as re,Z as se,ad as oe}from"./index-BGKEJEuu.js";import{P as le,u as ne}from"./accessSettings-DVvsW_Yv.js";import{u as ie,S as de}from"./usePermission-CYqkqYTp.js";/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=O("EyeOffIcon",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=O("UserCheckIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-vue-next v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=O("UserXIcon",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),ge=N({__name:"UserStatusBadge",props:{isActive:{type:Boolean},size:{default:"md"}},setup(n){return(v,m)=>(s(),l("span",{class:f(["inline-flex items-center font-semibold rounded-full",n.size==="sm"?"px-2 py-0.5 text-xs":"px-2.5 py-1 text-xs",n.isActive?"bg-green-100 dark:bg-green-900/40 text-green-700 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"])},[e("span",{class:f(["w-1.5 h-1.5 rounded-full mr-1.5",n.isActive?"bg-green-500 dark:bg-green-400":"bg-gray-400 dark:bg-gray-500"])},null,2),k(" "+d(n.isActive?"Active":"Inactive"),1)],2))}}),ye={class:"space-y-4"},xe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3"},me={class:"flex flex-col sm:flex-row gap-3 flex-1"},pe={class:"relative flex-1 max-w-sm"},ve=["value"],fe={class:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden"},be={class:"overflow-auto"},ke={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},he={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},we={key:0},_e={key:1},$e={colspan:"6",class:"px-6 py-10 text-center"},Ue={class:"flex flex-col items-center text-gray-400 dark:text-gray-500"},Ce={key:0,class:"text-xs mt-1"},Se={class:"px-6 py-4 whitespace-nowrap"},ze={class:"flex items-center space-x-3"},Pe=["src","alt"],Ae={class:"text-sm font-medium text-gray-900 dark:text-white"},Me={class:"text-xs text-gray-500 dark:text-gray-400"},je={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"text-sm text-gray-700 dark:text-gray-300 font-mono"},Ve={class:"px-6 py-4 whitespace-nowrap"},Te={key:0,class:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 dark:bg-blue-900/40 text-blue-800 dark:text-blue-300"},Ee={key:1,class:"text-xs text-gray-400 dark:text-gray-500"},Ie={class:"px-6 py-4 whitespace-nowrap"},Be={class:"px-6 py-4 whitespace-nowrap"},qe={class:"text-sm text-gray-500 dark:text-gray-400"},Ne={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},Re=["onClick","title"],De=["onClick"],Le=["onClick"],Oe={key:0,class:"px-6 py-4 flex items-center justify-between border-t border-gray-200 dark:border-gray-700"},Ke={class:"text-sm text-gray-500 dark:text-gray-400"},He={class:"font-medium text-gray-700 dark:text-gray-300"},Xe={class:"font-medium text-gray-700 dark:text-gray-300"},Je={class:"font-medium text-gray-700 dark:text-gray-300"},Qe={class:"flex items-center space-x-1"},We=["disabled"],Ye={class:"px-3 py-1 text-sm text-gray-700 dark:text-gray-300"},Ze=["disabled"],Ge=N({__name:"UsersTable",props:{users:{},roles:{},loading:{type:Boolean},permissionKey:{},currentPage:{},lastPage:{},total:{},perPage:{},from:{},to:{}},emits:["open-user-modal","refresh","page-change","filter-change"],setup(n,{emit:v}){const m=v,{canCreate:M,canUpdate:C,canDelete:z}=ie(),h=K(),r=A(""),c=A(null),g=A("");let E;const I=()=>{clearTimeout(E),E=setTimeout(()=>{F()},400)},B=()=>{F()},F=()=>{const i={search:r.value,role_id:c.value??null};g.value!==""?i.is_active=g.value==="active":i.is_active=void 0,m("filter-change",i)},o=()=>{r.value="",c.value=null,g.value="",F()},p=S(()=>r.value||c.value!=null||g.value!==""),w=async i=>{var a,u;const t=i.is_active?"deactivate":"activate";if(confirm(`Are you sure you want to ${t} ${i.full_name}?`))try{await h.toggleStatus(i.id,!i.is_active),U.success(`User ${t}d successfully`),m("refresh")}catch(_){U.error(((u=(a=_.response)==null?void 0:a.data)==null?void 0:u.message)||`Failed to ${t} user`),console.error(_)}},V=async i=>{var t,a;if(confirm(`Are you sure you want to deactivate ${i.full_name}? This action cannot be undone.`))try{await h.deactivateUser(i.id),U.success("User deactivated successfully"),m("refresh")}catch(u){U.error(((a=(t=u.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to deactivate user"),console.error(u)}};return(i,t)=>(s(),l("div",ye,[e("div",xe,[e("div",me,[e("div",pe,[$(y(H),{size:16,class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 pointer-events-none"}),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),onInput:I,type:"text",placeholder:"Search users...",class:"w-full pl-9 pr-4 py-2 text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-colors"},null,544),[[T,r.value]])]),b(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>c.value=a),onChange:B,class:"text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-colors"},[t[6]||(t[6]=e("option",{value:null},"All Roles",-1)),(s(!0),l(D,null,L(n.roles,a=>(s(),l("option",{key:a.id,value:a.id},d(a.name),9,ve))),128))],544),[[R,c.value]]),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>g.value=a),onChange:B,class:"text-sm rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent transition-colors"},[...t[7]||(t[7]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],544),[[R,g.value]]),p.value?(s(),l("button",{key:0,onClick:o,class:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 underline transition-colors whitespace-nowrap"}," Clear filters ")):x("",!0)]),y(M)(n.permissionKey)?(s(),l("button",{key:0,onClick:t[3]||(t[3]=a=>m("open-user-modal")),class:"flex items-center space-x-2 px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors whitespace-nowrap"},[$(y(W),{size:16}),t[8]||(t[8]=e("span",null,"Add User",-1))])):x("",!0)]),e("div",fe,[e("div",be,[e("table",ke,[t[11]||(t[11]=e("thead",{class:"bg-gray-50 dark:bg-gray-900"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"User"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Username"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Role"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Last Login"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",he,[n.loading?(s(),l("tr",we,[...t[9]||(t[9]=[e("td",{colspan:"6",class:"px-6 py-10 text-center text-gray-500 dark:text-gray-400"},[e("div",{class:"flex flex-col items-center"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 dark:border-blue-400 mb-2"}),e("span",{class:"text-sm"},"Loading users...")])],-1)])])):n.users.length===0?(s(),l("tr",_e,[e("td",$e,[e("div",Ue,[$(y(H),{size:32,class:"mb-2 opacity-50"}),t[10]||(t[10]=e("p",{class:"text-sm font-medium"},"No users found",-1)),p.value?(s(),l("p",Ce,"Try adjusting your filters")):x("",!0)])])])):(s(!0),l(D,{key:2},L(n.users,a=>{var u,_,j;return s(),l("tr",{key:a.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors"},[e("td",Se,[e("div",ze,[e("img",{src:a.profile_photo,alt:a.initials,class:"h-8 w-8 rounded-full object-cover bg-gray-200 dark:bg-gray-700 flex-shrink-0"},null,8,Pe),e("div",null,[e("div",Ae,d(a.full_name),1),e("div",Me,d(a.email),1)])])]),e("td",je,[e("span",Fe,d(a.username),1)]),e("td",Ve,[a.role?(s(),l("span",Te,d(a.role.name),1)):(s(),l("span",Ee,"—"))]),e("td",Ie,[$(ge,{"is-active":a.is_active},null,8,["is-active"])]),e("td",Be,[e("span",qe,d(a.last_login??"—"),1)]),e("td",Ne,[y(C)(n.permissionKey)&&((u=a.role)==null?void 0:u.name)!=="superadmin"?(s(),l("button",{key:0,onClick:q=>w(a),title:a.is_active?"Deactivate":"Activate",class:f(["transition-colors",a.is_active?"text-yellow-500 dark:text-yellow-400 hover:text-yellow-700 dark:hover:text-yellow-300":"text-green-500 dark:text-green-400 hover:text-green-700 dark:hover:text-green-300"])},[a.is_active?(s(),P(y(ce),{key:0,size:18})):(s(),P(y(ue),{key:1,size:18}))],10,Re)):x("",!0),y(C)(n.permissionKey)&&((_=a.role)==null?void 0:_.name)!=="superadmin"?(s(),l("button",{key:1,onClick:q=>m("open-user-modal",a),title:"Edit",class:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 transition-colors"},[$(y(le),{size:18})],8,De)):x("",!0),y(z)(n.permissionKey)&&a.is_active&&((j=a.role)==null?void 0:j.name)!=="superadmin"?(s(),l("button",{key:2,onClick:q=>V(a),title:"Deactivate",class:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 transition-colors"},[$(y(Y),{size:18})],8,Le)):x("",!0)])])}),128))])])]),!n.loading&&n.users.length>0?(s(),l("div",Oe,[e("p",Ke,[t[12]||(t[12]=k(" Showing ",-1)),e("span",He,d(n.from),1),t[13]||(t[13]=k(" to ",-1)),e("span",Xe,d(n.to),1),t[14]||(t[14]=k(" of ",-1)),e("span",Je,d(n.total),1),t[15]||(t[15]=k(" results ",-1))]),e("div",Qe,[e("button",{onClick:t[4]||(t[4]=a=>m("page-change",n.currentPage-1)),disabled:n.currentPage<=1,class:"p-1.5 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors"},[$(y(Z),{size:18})],8,We),e("span",Ye," Page "+d(n.currentPage)+" of "+d(n.lastPage),1),e("button",{onClick:t[5]||(t[5]=a=>m("page-change",n.currentPage+1)),disabled:n.currentPage>=n.lastPage,class:"p-1.5 rounded-md text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-40 disabled:cursor-not-allowed transition-colors"},[$(y(G),{size:18})],8,Ze)])])):x("",!0)])]))}}),et={class:"fixed inset-0 bg-black bg-opacity-50 dark:bg-opacity-70 flex items-center justify-center z-50 p-4 !mt-0"},tt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-hidden border border-gray-200 dark:border-gray-700"},at={class:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700"},rt={class:"text-xl font-semibold text-gray-900 dark:text-gray-100"},st={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ot=["disabled"],lt={key:0,class:"absolute inset-0 bg-white dark:bg-gray-800 bg-opacity-75 dark:bg-opacity-75 flex items-center justify-center z-10 rounded-lg"},nt={class:"p-6 overflow-y-auto max-h-[calc(90vh-180px)] modal-scroll"},it={class:"grid grid-cols-2 gap-4"},dt={key:0,class:"mt-1 text-xs text-red-500"},ut={key:0,class:"mt-1 text-xs text-red-500"},ct={class:"grid grid-cols-3 gap-4"},gt={class:"col-span-2"},yt={key:0,class:"mt-1 text-xs text-red-500"},xt={key:0,class:"mt-1 text-xs text-red-500"},mt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},pt={key:0,class:"text-red-500"},vt={key:1,class:"text-gray-400 dark:text-gray-500 font-normal text-xs ml-1"},ft={class:"relative"},bt=["type"],kt={key:0,class:"mt-1 text-xs text-red-500"},ht={key:0},wt={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},_t={key:0,class:"text-red-500"},$t={class:"relative"},Ut=["type"],Ct={key:0,class:"mt-1 text-xs text-red-500"},St=["value"],zt={key:0,class:"mt-1 text-xs text-red-500"},Pt={class:"flex items-center justify-between py-2"},At={class:"flex justify-end gap-3 p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/30"},Mt=["disabled"],jt=["disabled"],Ft={key:0,class:"animate-spin h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Vt=N({__name:"UserModal",props:{user:{},roles:{}},emits:["close","saved"],setup(n,{emit:v}){const m=n,M=v,C=K(),z=A(!1),h=A(!1),r=A({first_name:"",middle_name:null,last_name:"",suffix:null,username:"",email:"",password:"",password_confirmation:"",default_role_id:0,is_active:!0}),c=S(()=>C.submitting),g=S(()=>m.user!==void 0),E=S(()=>g.value?"Edit User":"Add New User"),I=S(()=>g.value?"Update user information":"Create a new user account"),B=S(()=>g.value?"Update User":"Create User"),F=()=>{r.value={first_name:"",middle_name:null,last_name:"",suffix:null,username:"",email:"",password:"",password_confirmation:"",default_role_id:0,is_active:!0},z.value=!1,h.value=!1};ee(()=>m.user,i=>{var t;i?r.value={first_name:i.first_name,middle_name:i.middle_name,last_name:i.last_name,suffix:i.suffix,username:i.username,email:i.email,password:"",password_confirmation:"",default_role_id:((t=i.role)==null?void 0:t.id)??0,is_active:i.is_active}:F()},{immediate:!0});const o=A({}),p=()=>(o.value={},r.value.first_name.trim()||(o.value.first_name="First name is required"),r.value.last_name.trim()||(o.value.last_name="Last name is required"),r.value.username.trim()||(o.value.username="Username is required"),r.value.email.trim()?/\S+@\S+\.\S+/.test(r.value.email)||(o.value.email="Enter a valid email"):o.value.email="Email is required",r.value.default_role_id||(o.value.default_role_id="Role is required"),g.value?r.value.password&&r.value.password!==r.value.password_confirmation&&(o.value.password_confirmation="Passwords do not match"):r.value.password?r.value.password!==r.value.password_confirmation&&(o.value.password_confirmation="Passwords do not match"):o.value.password="Password is required",Object.keys(o.value).length===0),w=async()=>{var i,t,a;if(p())try{const u={first_name:r.value.first_name,middle_name:r.value.middle_name||null,last_name:r.value.last_name,suffix:r.value.suffix||null,username:r.value.username,email:r.value.email,default_role_id:r.value.default_role_id,is_active:r.value.is_active};r.value.password&&(u.password=r.value.password,u.password_confirmation=r.value.password_confirmation),g.value&&m.user?(await C.updateUser(m.user.id,u),U.success("User updated successfully")):(await C.createUser(u),U.success("User created successfully")),M("saved")}catch(u){if(((i=u.response)==null?void 0:i.status)===422){const _=u.response.data.errors;Object.keys(_).forEach(j=>{o.value[j]=_[j][0]}),U.error("Please fix the errors and try again")}else U.error(((a=(t=u.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to save user");console.error(u)}},V=()=>{M("close")};return(i,t)=>(s(),l("div",et,[e("div",tt,[e("div",at,[e("div",null,[e("h2",rt,d(E.value),1),e("p",st,d(I.value),1)]),e("button",{onClick:V,disabled:c.value,class:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50"},[$(y(te),{size:20,class:"text-gray-500 dark:text-gray-400"})],8,ot)]),c.value?(s(),l("div",lt,[...t[12]||(t[12]=[e("div",{class:"flex flex-col items-center"},[e("svg",{class:"w-8 h-8 animate-spin text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})]),e("span",{class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},"Saving user...")],-1)])])):x("",!0),e("div",nt,[e("form",{onSubmit:ae(w,["prevent"]),class:"space-y-4"},[e("div",it,[e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[k(" First Name "),e("span",{class:"text-red-500"},"*")],-1)),b(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.first_name=a),type:"text",placeholder:"Juan",class:f(["w-full rounded-lg border px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",o.value.first_name?"border-red-400 dark:border-red-500":"border-gray-300 dark:border-gray-600"])},null,2),[[T,r.value.first_name]]),o.value.first_name?(s(),l("p",dt,d(o.value.first_name),1)):x("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[k(" Last Name "),e("span",{class:"text-red-500"},"*")],-1)),b(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.last_name=a),type:"text",placeholder:"Dela Cruz",class:f(["w-full rounded-lg border px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",o.value.last_name?"border-red-400 dark:border-red-500":"border-gray-300 dark:border-gray-600"])},null,2),[[T,r.value.last_name]]),o.value.last_name?(s(),l("p",ut,d(o.value.last_name),1)):x("",!0)])]),e("div",ct,[e("div",gt,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Middle Name ",-1)),b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value.middle_name=a),type:"text",placeholder:"Optional",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"},null,512),[[T,r.value.middle_name]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Suffix ",-1)),b(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.suffix=a),type:"text",placeholder:"Jr., Sr.",class:"w-full rounded-lg border border-gray-300 dark:border-gray-600 px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500"},null,512),[[T,r.value.suffix]])])]),e("div",null,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[k(" Username "),e("span",{class:"text-red-500"},"*")],-1)),b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.username=a),type:"text",placeholder:"juan.delacruz",class:f(["w-full rounded-lg border px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 font-mono",o.value.username?"border-red-400 dark:border-red-500":"border-gray-300 dark:border-gray-600"])},null,2),[[T,r.value.username]]),o.value.username?(s(),l("p",yt,d(o.value.username),1)):x("",!0)]),e("div",null,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[k(" Email Address "),e("span",{class:"text-red-500"},"*")],-1)),b(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.email=a),type:"email",placeholder:"juan@example.com",class:f(["w-full rounded-lg border px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",o.value.email?"border-red-400 dark:border-red-500":"border-gray-300 dark:border-gray-600"])},null,2),[[T,r.value.email]]),o.value.email?(s(),l("p",xt,d(o.value.email),1)):x("",!0)]),e("div",null,[e("label",mt,[t[19]||(t[19]=k(" Password ",-1)),g.value?(s(),l("span",vt,"(leave blank to keep current)")):(s(),l("span",pt,"*"))]),e("div",ft,[b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.password=a),type:z.value?"text":"password",placeholder:"Min. 8 characters",class:f(["w-full rounded-lg border px-4 py-2.5 text-sm pr-10 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",o.value.password?"border-red-400 dark:border-red-500":"border-gray-300 dark:border-gray-600"])},null,10,bt),[[X,r.value.password]]),e("button",{type:"button",onClick:t[7]||(t[7]=a=>z.value=!z.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"},[z.value?(s(),P(y(Q),{key:1,size:16})):(s(),P(y(J),{key:0,size:16}))])]),o.value.password?(s(),l("p",kt,d(o.value.password),1)):x("",!0)]),!g.value||r.value.password?(s(),l("div",ht,[e("label",wt,[t[20]||(t[20]=k(" Confirm Password ",-1)),g.value?x("",!0):(s(),l("span",_t,"*"))]),e("div",$t,[b(e("input",{"onUpdate:modelValue":t[8]||(t[8]=a=>r.value.password_confirmation=a),type:h.value?"text":"password",placeholder:"Re-enter password",class:f(["w-full rounded-lg border px-4 py-2.5 text-sm pr-10 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500",o.value.password_confirmation?"border-red-400 dark:border-red-500":"border-gray-300 dark:border-gray-600"])},null,10,Ut),[[X,r.value.password_confirmation]]),e("button",{type:"button",onClick:t[9]||(t[9]=a=>h.value=!h.value),class:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500 hover:text-gray-600 dark:hover:text-gray-300"},[h.value?(s(),P(y(Q),{key:1,size:16})):(s(),P(y(J),{key:0,size:16}))])]),o.value.password_confirmation?(s(),l("p",Ct,d(o.value.password_confirmation),1)):x("",!0)])):x("",!0),e("div",null,[t[22]||(t[22]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[k(" Role "),e("span",{class:"text-red-500"},"*")],-1)),b(e("select",{"onUpdate:modelValue":t[10]||(t[10]=a=>r.value.default_role_id=a),class:f(["w-full rounded-lg border px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-transparent outline-none transition-colors bg-white dark:bg-gray-700 text-gray-900 dark:text-white",o.value.default_role_id?"border-red-400 dark:border-red-500":"border-gray-300 dark:border-gray-600"])},[t[21]||(t[21]=e("option",{value:0,disabled:""},"Select a role",-1)),(s(!0),l(D,null,L(n.roles,a=>(s(),l("option",{key:a.id,value:a.id},d(a.name),9,St))),128))],2),[[R,r.value.default_role_id]]),o.value.default_role_id?(s(),l("p",zt,d(o.value.default_role_id),1)):x("",!0)]),e("div",Pt,[t[23]||(t[23]=e("div",null,[e("p",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Active Status"),e("p",{class:"text-xs text-gray-500 dark:text-gray-400"},"Inactive users cannot log in")],-1)),e("button",{type:"button",onClick:t[11]||(t[11]=a=>r.value.is_active=!r.value.is_active),class:f(["relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",r.value.is_active?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-600"])},[e("span",{class:f(["inline-block h-4 w-4 transform rounded-full bg-white shadow transition-transform",r.value.is_active?"translate-x-6":"translate-x-1"])},null,2)],2)])],32)]),e("div",At,[e("button",{onClick:V,disabled:c.value,class:"px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors text-sm font-medium disabled:opacity-50"}," Cancel ",8,Mt),e("button",{onClick:w,disabled:c.value,class:"px-4 py-2.5 bg-blue-600 dark:bg-blue-700 text-white rounded-lg hover:bg-blue-700 dark:hover:bg-blue-800 transition-colors flex items-center gap-2 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(s(),l("svg",Ft,[...t[24]||(t[24]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(s(),P(y(de),{key:1,size:16})),e("span",null,d(B.value),1)],8,jt)])])]))}}),Tt={class:"space-y-6 p-0 md:p-6"},Et={class:"flex items-center justify-between"},It={class:"flex items-center space-x-2 text-gray-400 dark:text-gray-500"},Bt={class:"text-sm font-medium"},qt="users",Nt=N({__name:"index",setup(n){const v=K(),m=ne(),M=A(!1),C=A(void 0),z=S(()=>v.users),h=S(()=>m.roles),r=S(()=>v.loading),c=S(()=>v.pagination),g=async()=>{try{await Promise.all([v.fetchUsers(),m.fetchRoles()])}catch(p){U.error("Failed to load users"),console.error(p)}},E=p=>{C.value=p,M.value=!0},I=()=>{M.value=!1,C.value=void 0},B=()=>{I(),g()},F=async p=>{try{await v.setFilters(p)}catch(w){U.error("Failed to apply filters"),console.error(w)}},o=async p=>{try{await v.goToPage(p)}catch(w){U.error("Failed to load page"),console.error(w)}};return re(()=>{g()}),se(()=>{g()}),(p,w)=>{var V,i,t,a,u,_,j,q;return s(),l("div",Tt,[e("div",Et,[w[0]||(w[0]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Organization"),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mt-1"}," Manage users, roles, and account status ")],-1)),e("div",It,[$(y(oe),{size:20}),e("span",Bt,d(((V=c.value)==null?void 0:V.total)??0)+" user"+d((((i=c.value)==null?void 0:i.total)??0)!==1?"s":""),1)])]),$(Ge,{users:z.value,roles:h.value,loading:r.value,"permission-key":qt,"current-page":((t=c.value)==null?void 0:t.current_page)??1,"last-page":((a=c.value)==null?void 0:a.last_page)??1,total:((u=c.value)==null?void 0:u.total)??0,"per-page":((_=c.value)==null?void 0:_.per_page)??15,from:((j=c.value)==null?void 0:j.from)??null,to:((q=c.value)==null?void 0:q.to)??null,onOpenUserModal:E,onRefresh:g,onPageChange:o,onFilterChange:F},null,8,["users","roles","loading","current-page","last-page","total","per-page","from","to"]),M.value?(s(),P(Vt,{key:0,user:C.value,roles:h.value,onClose:I,onSaved:B},null,8,["user","roles"])):x("",!0)])}}}),Ot=N({__name:"Organization",setup(n){return(v,m)=>(s(),P(Nt))}});export{Ot as default};
